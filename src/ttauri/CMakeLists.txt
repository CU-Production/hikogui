
add_subdirectory(text)
add_subdirectory(GUI)
add_subdirectory(widgets)
add_subdirectory(cells)
add_subdirectory(audio)
add_subdirectory(encoding)
add_subdirectory(formula)
add_subdirectory(stencil)

target_sources(ttauri PRIVATE
    detail/observable_base.hpp
    detail/observable_cast.hpp
    detail/observable_not.hpp
    detail/observable_unary.hpp
    detail/observable_value.hpp
    A2B10G10R10UNormPack32.hpp
    A8B8G8R8SrgbPack32.hpp
    aarect.hpp
    algorithm.hpp
    Application.hpp
    Application_base.cpp
    Application_base.hpp
    Application_forward.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/Application_macos.hpp>
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/Application_macos.mm>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/Application_win32.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/Application_win32.hpp>
    ApplicationDelegate.hpp
    assert.hpp
    atomic.hpp
    attributes.hpp
    audio_counter_clock.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/audio_counter_clock_macos.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/audio_counter_clock_win32.cpp>
    audio_utc_clock.hpp
    bezier.hpp
    BezierCurve.cpp
    BezierCurve.hpp
    BezierPoint.hpp
    bigint.hpp
    bits.hpp
    byte_string.hpp
    cell_address.hpp
    command.hpp
    CommandLineParser.hpp
    counters.hpp
    CP1252.hpp
    cpu_counter_clock.hpp
    #cpu_id.hpp
    #$<${TT_X64}:${CMAKE_CURRENT_SOURCE_DIR}/cpu_id_x64.cpp>
    cpu_utc_clock.hpp
    date.hpp
    datum.hpp
    debugger.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/debugger_macos.mm>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/debugger_win32.cpp>
    decimal.hpp
    endian.hpp
    exceptions.hpp
    File.hpp
    $<${TT_POSIX}:${CMAKE_CURRENT_SOURCE_DIR}/File_posix.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/File_win32.cpp>
    FileMapping.cpp
    FileMapping.hpp
    $<${TT_POSIX}:${CMAKE_CURRENT_SOURCE_DIR}/FileMapping_posix.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/FileMapping_win32.cpp>
    FileView.cpp
    FileView.hpp
    $<${TT_POSIX}:${CMAKE_CURRENT_SOURCE_DIR}/FileView_posix.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/FileView_win32.cpp>
    fixed.hpp
    float16.hpp
    format.hpp
    glob.hpp
    hash.hpp
    hires_utc_clock.cpp
    hires_utc_clock.hpp
    $<${TT_POSIX}:${CMAKE_CURRENT_SOURCE_DIR}/hires_utc_clock_posix.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/hires_utc_clock_win32.cpp>
    huffman.hpp
    iaarect.hpp
    int_carry.hpp
    int_overflow.hpp
    interval_vec2.hpp
    ivec.hpp
    logger.cpp
    logger.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/logger_macos.mm>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/logger_win32.cpp>
    mat.hpp
    math.hpp
    memory.hpp
    meta.hpp
    nested_vector_iterator.hpp
    notifier.hpp
    numeric_cast.hpp
    observable.hpp
    operator.hpp
    os_detect.hpp
    parse_location.hpp
    Path.cpp
    Path.hpp
    PixelMap.cpp
    PixelMap.hpp
    PixelMap.inl
    placement.hpp
    polymorphic_value.hpp
    polynomial.hpp
    R16G16B16A16SFloat.hpp
    R32G32B32A32SFloat.hpp
    R32G32B32SFloat.hpp
    R32G32SFloat.hpp
    R8SNorm.hpp
    random_pcg.hpp
    range_map.hpp
    Rec2020.hpp
    Rec2100.hpp
    rect.hpp
    required.hpp
    ResourceView.hpp
    safe_int.hpp
    SDF8.hpp
    small_map.hpp
    small_vector.hpp
    sRGB.hpp
    StaticResourceView.cpp
    StaticResourceView.hpp
    strings.hpp
    sync_clock.hpp
    tag.hpp
    tagged_id.hpp
    tagged_map.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/thread_macos.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/thread_win32.cpp>
    thread.hpp
    throw_exception.cpp
    throw_exception.hpp
    timer.cpp
    timer.hpp
    tokenizer.cpp
    tokenizer.hpp
    trace.cpp
    trace.hpp
    Trigger.hpp
    type_traits.hpp
    UndoStack.hpp
    unfair_mutex.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/unfair_mutex_macos_impl.hpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/unfair_mutex_win32_impl.hpp>
    unfair_recursive_mutex.hpp
    Unicode.hpp
    URL.cpp
    URL.hpp
    $<${TT_MACOS}:${CMAKE_CURRENT_SOURCE_DIR}/URL_macos.mm>
    $<${TT_POSIX}:${CMAKE_CURRENT_SOURCE_DIR}/URL_posix.cpp>
    $<${TT_WIN32}:${CMAKE_CURRENT_SOURCE_DIR}/URL_win32.cpp>
    url_parser.cpp
    url_parser.hpp
    utils.hpp
    vec.cpp
    vec.hpp
    version.hpp
    vspan.hpp
    wfree_message_queue.hpp
    wfree_unordered_map.hpp
)

target_precompile_headers(ttauri PRIVATE
    required.hpp
    os_detect.hpp
    assert.hpp
    exceptions.hpp
    counters.hpp
    logger.hpp
    trace.hpp
    debugger.hpp
    datum.hpp
    vec.hpp
    ivec.hpp
    aarect.hpp
    rect.hpp
    mat.hpp
    strings.hpp
    URL.hpp
)

target_sources(ttauri_tests PRIVATE
    polymorphic_value_tests.cpp
    strings_tests.cpp
    url_parser_tests.cpp
    URL_tests.cpp
    bigint_tests.cpp
    int_overflow_tests.cpp
    cell_address_tests.cpp
    counters_tests.cpp
    datum_tests.cpp
    exceptions_tests.cpp
    FileView_tests.cpp
    polynomial_tests.cpp
    small_map_tests.cpp
    safe_int_tests.cpp
    BezierCurve_tests.cpp
    Path_tests.cpp
    PixelMap_tests.cpp
    tokenizer_tests.cpp
    glob_tests.cpp
    decimal_tests.cpp
    math_tests.cpp
    vec_tests.cpp
    mat_tests.cpp
    Unicode_tests.cpp
)

target_precompile_headers(ttauri_tests PRIVATE
    required.hpp
    os_detect.hpp
    assert.hpp
    exceptions.hpp
    counters.hpp
    logger.hpp
    trace.hpp
    debugger.hpp
    datum.hpp
    vec.hpp
    ivec.hpp
    aarect.hpp
    rect.hpp
    mat.hpp
    strings.hpp
    URL.hpp
)
